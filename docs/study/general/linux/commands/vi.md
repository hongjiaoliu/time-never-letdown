---
icon: edit
date: 2023-08-30
category:
  - 通用技能
tag:
  - Linux
  - Linux命令
star: true
---

# 基本 | vi

`vi` 是一个用于编辑文本文件的命令行文本编辑器，通常在命令行终端中使用。以下是从入门到高阶的`vi`命令详细讲解，以及常用的快捷键。

## 入门

### 1. 打开或创建文件

要使用`vi`编辑一个文件，只需在命令行中输入以下命令：

```bash
vi 文件名
```

例如，要编辑一个名为`file.txt`的文件，可以执行以下命令：

```bash
vi file.txt
```

## 基本编辑

### 2. 进入编辑模式

一旦在`vi`中打开文件，你会处于查看模式。要进入编辑模式以编辑文件内容，按下`i`键。

### 3. 保存文件

在编辑模式下，你可以编辑文件内容。要保存文件并退出编辑模式，按下`Esc`键，然后输入`:w`，并按下`Enter`。

### 4. 保存并退出

在编辑模式下，要保存文件并完全退出`vi`，按下`Esc`键，然后输入`:wq`，并按下`Enter`。

### 5. 取消编辑

如果在编辑模式中改变主意，可以按下`Esc`键，然后输入`:q!`，并按下`Enter`，以取消编辑并放弃更改。

## 常用快捷键

以下是一些在`vi`中常用的快捷键：

- `i`：进入插入模式，允许编辑文件内容。
- `Esc`：从编辑模式返回查看模式。
- `:w`：保存文件，但不退出`vi`。
- `:wq`：保存文件并退出`vi`。
- `:q!`：退出`vi`，放弃任何更改。
- `/`：进入查找模式，[正向]查找指定的文本。
- `?`：进入查找模式，[反向]查找指定的文本。
- `n`：在查找模式下，跳到下一个匹配项。
- `N`：在查找模式下，跳到上一个匹配项。
- `:set nu`：显示行号。
- `:set nonu`：隐藏行号。
- `:set ic`：在查找时忽略大小写。
- `:set noic`：在查找时区分大小写。
- `:split`：水平分割窗口。
- `:vsplit`：垂直分割窗口。
- `Ctrl + w`，然后按`↑`、`↓`、`←`、`→`：切换窗口焦点。
- `h\j\k\l`: 左、下、上、右
- `Ctrl + f`: forward 向上翻一页
- `Ctrl + b`: backword 向下翻一页
- `Ctrl + u`: up 光标向上移动半页的距离
- `Ctrl + d`: up 光标向下移动半页的距离
- `v`：进入可视模式，用于选择文本。
- `y`：复制选择的文本。
- `x`：剪切选择的文本。
- `p`：在光标后粘贴剪切或复制的文本。
- `dd`：删除当前行。
- `yy`：复制当前行。
- `gg`: 跳转到文章首部
- `G`： 跳转到文章尾部
- `u`：撤销上一步操作。
- `P`:(大写)粘贴在光标所在前一行
- `p`:(小写)粘贴在光标所在下一行
- `Ctrl + r`：重做上一步操作。

## 进阶

### 6. 查找和替换

在查看模式下，按下`/`键，然后输入要查找的文本并按下`Enter`，可以查找文本。要查找并替换，可以在查找模式下输入`:%s/要替换的文本/新文本/g`。

## 高阶

### 7. 分割窗口

在`vi`中，可以使用`:split`命令在水平方向分割窗口，使用`:vsplit`命令在垂直方向分割窗口。可以在不同窗口编辑不同部分的文件。

### 8. 复制、粘贴和剪切

在查看模式下，将光标移到要复制或剪切的位置，按下`v`键进入可视模式，然后使用方向键选择文本。选择文本后，按下`y`复制，按下`x`剪切。将光标移动到要粘贴的位置，按下`p`键粘贴。

## 总结

通过`vi`命令，你可以在命令行终端中编辑文本文件。从简单的编辑、保存、退出，到高级的查找、替换、分割窗口等操作，`vi`是一个功能强大的文本编辑工具。

---
